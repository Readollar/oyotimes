---
// src/components/Header.astro
// This is the cleaned-up, correct version.

// 1. We ONLY get 'activeId' from the props. Defaults to "home".
const { activeId = "home" } = Astro.props;

// 2. We ONLY use your 'navItems' list.
// I've fixed the hrefs to match the dynamic category page.
const navItems = [
  { name: "Home", href: "/", id: "home" },
  { name: "Business", href: "/category/business", id: "business" },
  { name: "Politics", href: "/category/politics", id: "politics" },
  { name: "Tech", href: "/category/tech", id: "tech" },
  { name: "Education", href: "/category/education", id: "education" },
  { name: "Sports", href: "/category/sports", id: "sports" },
  { name: "Places", href: "/places", id: "places" },
  { name: "Community's Insight", href: "/community", id: "community" },
  { name: "Monarch's Desk", href: "/monarch", id: "monarch" },
  { name: "About", href: "/about", id: "about" },
];
---

<header class="oy-header" role="banner">
    <div class="container head-bar">
    <div class="head-inner">
      <div class="date-left" aria-hidden="false">
        <img src="/icons/icon-world.svg" alt="" class="icon-world" />
        <span id="oy-current-date" class="date-text">Loading date...</span>
      </div>
      <div class="brand">
        <img src="/img/logos/logo-full.svg" alt="OyoTimes" class="brand-logo" />
      </div>
      <div class="right-actions">
        <button class="search-btn" aria-label="Search">
          <img src="/icons/icon-search.svg" alt="Search" />
        </button>
        <button class="hamburger" id="oy-hamburger" aria-label="Open menu" aria-expanded="false">
          <span></span><span></span><span></span>
        </button>
      </div>
    </div>
  </div>
</header>

<div class="nav-band" id="oy-nav-band">
    <div class="container nav-inner">
      <nav class="main-nav" role="navigation" aria-label="Main">
        <ul class="nav-list">
          {navItems.map(item => (
            <li class={`nav-item ${item.id === activeId ? 'active' : ''}`}>
              <a href={item.href} class="nav-link">{item.name}</a>
            </li>
          ))}
        </ul>
      </nav>
    </div>
  </div>

<script>
  // live date
  (function () {
    const el = document.getElementById("oy-current-date");
    if (!el) return;
    const now = new Date();
    const opts = { weekday: "long", year: "numeric", month: "long", day: "numeric" };
    el.textContent = now.toLocaleDateString(undefined, opts);
  })();

  // toggles for mobile nav
  (function () {
    const btn = document.getElementById("oy-hamburger");
    const navBand = document.getElementById("oy-nav-band");
    if (!btn || !navBand) return;
    btn.addEventListener("click", () => {
      const expanded = btn.getAttribute("aria-expanded") === "true";
      btn.setAttribute("aria-expanded", String(!expanded));
      navBand.classList.toggle("open");
    });
  })();
</script>

<style>
  /* Your existing <style> block is perfect. I've copied it here. */
:root {
  --side-margin: 120px;
  --gutter: 24px;
}
.oy-header {
 position: sticky;
 top: 0;
 z-index: 120;
 background: var(--color-bg-primary);
 box-shadow: 0 1px 0 rgba(0,0,0,0.03);
}
.head-bar {
 background: var(--color-bg-primary);
 color: var(--color-text-secondary);
 font-family: var(--font-body);
 font-size: var(--font-paragraph-size);
}
.head-inner {
 display: grid;
 grid-template-columns: 1fr auto 1fr;
 align-items: center;
 justify-content: space-between;
 padding: 18px 0;
}
.date-left {
 display: flex;
 align-items: center;
 gap: 12px;
}
.icon-world { width: 18px; height: 18px; opacity: 0.9 }
.date-text { color: var(--color-text-secondary); }
.brand {
 grid-column: 2 / 3;
 display:flex;
 align-items:center;
 gap: 18px;
 justify-self:center;
}
.brand-logo { width: 200px; height: auto; display:block; }
.right-actions {
 justify-self: end;
 display: flex;
 align-items: center;
 gap: 12px;
}
.search-btn {
 background: #f5f5f5;
 border: none;
 padding: 10px;
 border-radius: 8px;
 display: inline-flex;
 align-items:center;
 justify-content:center;
 cursor: pointer;
}
.search-btn img { width: 18px; height:18px; }
.hamburger {
 display: none;
 background: none;
 border: none;
 width: 40px;
 height: 34px;
 padding: 6px;
 flex-direction: column;
 justify-content: space-between;
 gap: 4px;
 cursor: pointer;
}
.hamburger span {
 display: block;
 height: 3px;
 background: var(--color-text-primary);
 border-radius: 3px;
}
.nav-band {
 background: #e5e5e5;
 border-top: 1px solid var(--color-divider);
 border-bottom: 1px solid var(--color-divider);
}
.nav-inner {
 padding: 12px 0;
}
.main-nav { width: 100%; }
.nav-list {
 display: flex;
 gap: calc(var(--gutter));
 align-items: center;
 justify-content: center;
 margin: 0;
 padding: 0;
 list-style: none;
}
.nav-item { }
.nav-link {
 text-decoration: none;
 color: var(--color-text-primary);
 font-family: var(--font-body-md-family);
 font-size: var(--font-body-md-size);
 font-weight: 500;
 padding: 6px 2px;
 transition: color .15s ease;
}
.nav-item.active .nav-link,
.nav-link:hover {
 color: var(--color-base-red-942414);
}

 @media (max-width: 980px) {
:root { --side-margin: 24px; }
.head-inner { grid-template-columns: 1fr auto; }
.brand { grid-column: 1 / 2; justify-self: start; }
.right-actions { justify-self: end; }
.nav-list { display: none; flex-direction: column; align-items: stretch; gap: 12px; padding: 12px; }
.hamburger { display: inline-flex; }
.nav-band.open .nav-list {
 display: flex;
 background: var(--color-bg-secondary);
}
.nav-band.open { position: relative; }
}
 @media (min-width: 1440px) {
.container { min-width: 1200px; margin-left: auto; margin-right: auto; }
}
</style>