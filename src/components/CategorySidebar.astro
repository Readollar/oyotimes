---
// src/components/CategorySidebar.astro
// The *correct* sidebar for the category pages, using CardVertical.

import CardVertical from './cards/CardVertical.astro';

// 1. Get the list of articles for this category from the page
export interface Props {
  articles: any[];
}
const { articles } = Astro.props;

// 2. Get the first 4 articles to show as "Top Stories"
const topStories = articles.slice(0, 4);
---
<aside class="space-y-8">
  <div class="relative">
    <label for="sidebar-search" class="sr-only">Search</label>
    <input 
      id="sidebar-search"
      type="search" 
      placeholder="Search..."
      class="w-full px-4 py-3 border border-border-divider rounded-md focus:ring-2 focus:ring-primary focus:outline-none"
    />
    <button class="absolute right-0 top-0 h-full px-4 text-text-muted hover:text-text-primary">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
    </button>
  </div>

  <div>
    <h3 class="font-merri font-bold text-xl mb-4">Top Stories</h3>
    <ul class="space-y-6">
      {topStories.map(story => (
        <li class="pt-6 border-t border-border-divider first:pt-0 first:border-t-0">
          <CardVertical
            href={story.url}
            imgSrc={story.frontmatter.heroImage}
            category={story.frontmatter.category}
            title={story.frontmatter.title}
            date={story.frontmatter.date}
            readTime={story.frontmatter.readTime}
          />
        </li>
      ))}
    </ul>
  </div>

  <div class="space-y-4">
    <div class="bg-background-alt h-64 rounded-md flex items-center justify-center text-text-muted">
      Advertising (360px * 250px)
    </div>
    <div class="bg-background-alt h-64 rounded-md flex items-center justify-center text-text-muted">
      Advertising (360px * 250px)
    </div>
  </div>
</aside>